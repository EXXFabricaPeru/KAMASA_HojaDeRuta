<!DOCTYPE html>
<html lang='es'>
<head>
    <meta charset='utf-8'/>
    <title>Get started with the Map Matching API</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'/>
    <!-- Import Mapbox GL JS  -->
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css' rel='stylesheet'/>
    <!-- Import jQuery -->
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.9/mapbox-gl-draw.js'></script>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.9/mapbox-gl-draw.css' type='text/css'/>

    <script src="general-routing.js"></script>
    <link rel="stylesheet" href="general-routing.css">
</head>

<body>
<!-- Create a container for the map -->
<div id='map'>
    <div id="left" class="sidebar flex-center left collapsed">
        <div id="instructions" class="sidebar-content rounded-rect flex-center">
            <table>
                <thead>
                <tr>
                    <th>CODIGO</th>
                    <th>COLOR</th>
                    <th>PESO</th>
                </tr>
                </thead>
                <tbody id="routes-table"></tbody>
            </table>
            <div style="font-size: 36px;" class="sidebar-toggle rounded-rect left" onclick="toggleSidebar('left')">
                &rarr;
            </div>
        </div>
    </div>
</div>
<script>
    // Add your Mapbox access token
    mapboxgl.accessToken = 'pk.eyJ1IjoiZmVsaXhzb2xhbm8iLCJhIjoiY2tveXQ0ZXdyMGR2bzJ3cWlwOHVxOWVkZyJ9.DFX9vGxv28Wb7Z7BxRg0Zg';
    var map = new mapboxgl.Map({
        container: 'map', // Specify the container ID
        style: 'mapbox://styles/mapbox/streets-v11', // Specify which map style to use
        center: [-76.978950, -12.212550], // Specify [longitude, latitude]
        zoom: 10
    });

    map.on('load', function () {
        loadRoutes(map);
    });

    function toggleSidebar(id) {
        const elem = document.getElementById(id);
        var classes = elem.className.split(' ');
        var collapsed = classes.indexOf('collapsed') !== -1;

        let padding = {};

        if (collapsed) {
            // Remove the 'collapsed' class from the class list of the element, this sets it back to the expanded state.
            classes.splice(classes.indexOf('collapsed'), 1);

            padding[id] = 300; // In px, matches the width of the sidebars set in .sidebar CSS class
            map.easeTo({
                padding: padding,
                duration: 1000 // In ms, CSS transition duration property for the sidebar matches this value
            });
        } else {
            padding[id] = 0;
            // Add the 'collapsed' class to the class list of the element
            classes.push('collapsed');

            map.easeTo({
                padding: padding,
                duration: 1000
            });
        }

        // Update the class list on the element
        elem.className = classes.join(' ');
    }


</script>
</body>
</html>